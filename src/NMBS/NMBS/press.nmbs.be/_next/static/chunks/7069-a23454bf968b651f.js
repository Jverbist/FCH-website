(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7069],{58:function(e,t,r){"use strict";r.d(t,{InfiniteStories:function(){return J}});var n,i,a,s,o,l,c=r(57437),u=r(73075),d=r(89828),f=r(2265),h=r(67303),g=r(34049),m=r(56800),v=r.n(m),p=r(29740),y=r(47265),_=r.n(y);function j(e){let{children:t,className:r}=e,n=(0,f.useRef)(!1),{isMobile:i,isTablet:a}=(0,p.Fy)(),s=(0,f.useMemo)(()=>i?(n.current=!1,0):(n.current=!0,a)?2:3,[i,a]),o=(0,f.useMemo)(()=>{let e=Array(s);return f.Children.toArray(t).forEach((t,r)=>{let n=r%s;e[n]||(e[n]=[]),e[n].push(t)}),e},[t,s]);return n.current?(0,c.jsx)("div",{className:v()(_().container,r,{[_().desktop]:3===s}),children:o.map((e,t)=>(0,c.jsx)("div",{children:e},"column-".concat(t)))}):(0,c.jsx)("div",{className:r,children:t})}var b=r(789),x=r(87010),N=r(77988),S=r(6398),C=r(65386),w=r.n(C);function E(e){let{className:t,showDate:r,showSubtitle:n,size:i="small",story:a,withStaticImage:s=!1}=e,{categories:o,title:l,subtitle:u}=a,d=(0,h.useLocale)(),{isTablet:g}=(0,p.Fy)(),m=(0,f.useMemo)(()=>b.Category.translations(o,d),[o,d]),y=m.length>0;return(0,c.jsxs)("div",{className:v()(w().container,t,{[w().small]:"small"===i,[w().medium]:"medium"===i,[w().big]:"big"===i,[w().withStaticImage]:s}),children:[(0,c.jsx)(x.r,{href:{routeName:"story",params:a},className:w().imageWrapper,title:l,children:(0,c.jsx)(S.s,{story:a,size:i,className:w().image,placeholderClassName:w().placeholder,isStatic:s})}),(0,c.jsxs)("div",{className:w().content,children:[y&&(0,c.jsx)(N.w,{categories:m,className:w().categories,showAllCategories:"small"!==i,isStatic:!0}),(0,c.jsx)("small"===i?"h3":"h2",{className:v()(w().title,{[w().noCategories]:!y,[w().noDate]:!r,[w().noDateAndCategories]:!y&&!r,[w().extendedTitle]:"small"!==i&&!u.length}),children:(0,c.jsx)(x.r,{href:{routeName:"story",params:a},className:w().titleLink,children:l})}),n&&u&&(!!g||"small"!==i)&&(0,c.jsx)("p",{className:w().subtitle,children:(0,c.jsx)(x.r,{href:{routeName:"story",params:a},className:w().subtitleLink,children:u})}),r&&a.published_at&&(0,c.jsx)("p",{className:w().date,children:(0,c.jsx)(h.FormattedDate,{value:a.published_at})})]})]})}var L=r(87052),O=r.n(L);function M(e){let{story:t,showDate:r}=e,{categories:n,title:i,subtitle:a}=t,s=(0,h.useLocale)(),o=(0,f.useMemo)(()=>b.Category.translations(n,s),[n,s]),l=i.length>110,u=i.length>220;return(0,c.jsxs)("div",{className:O().container,children:[(0,c.jsx)(x.r,{href:{routeName:"story",params:t},className:O().imageWrapper,title:i,children:(0,c.jsx)(S.s,{story:t,size:"big",className:O().image,placeholderClassName:O().placeholder})}),(0,c.jsxs)("div",{className:O().content,children:[(0,c.jsx)(N.w,{categories:o}),(0,c.jsx)("h2",{className:v()(O().title,{[O().huge]:l}),children:(0,c.jsx)(x.r,{href:{routeName:"story",params:t},className:O().titleLink,children:i})}),a&&(0,c.jsx)("p",{className:v()(O().subtitle,{[O().limited]:l,[O().hidden]:u}),children:(0,c.jsx)(x.r,{href:{routeName:"story",params:t},className:O().subtitleLink,children:a})}),r&&!t.is_pinned&&t.published_at&&(0,c.jsx)("span",{className:O().date,children:(0,c.jsx)(h.FormattedDate,{value:t.published_at})})]})]})}var k=r(19502),H=r(60965),A=r(87138),F=r(86916),R=r(74109),D=r.n(R);function P(e){let{activeCategory:t,categories:r,className:n,locale:i}=e,{formatMessage:a}=(0,k.Y)();return(0,c.jsxs)("div",{className:n,children:[(0,c.jsx)(F.V,{className:D().title,title:a(d.Iz.Xh.latestStories)}),(0,c.jsxs)("div",{className:D().filters,children:[(0,c.jsx)(Z,{isActive:void 0===t,children:(0,c.jsx)(H.FormattedMessage,{locale:i,for:d.Iz.Xh.allStories})}),r.map(e=>{var r;let{id:n,display_name:a,i18n:s}=e;return(0,c.jsx)(Z,{categoryId:n,isActive:(null==t?void 0:t.id)===n,children:(null===(r=s[i])||void 0===r?void 0:r.name)||a},n)})]})]})}function Z(e){let{categoryId:t,children:r,isActive:n}=e;return(0,c.jsx)(A.default,{href:t?{query:{category:t}}:{query:{category:null}},className:v()(D().badge,{[D().active]:n}),scroll:!1,children:r})}var z=r(4410);function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var I=function(e){return z.createElement("svg",q({width:106,height:120,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=z.createElement("path",{d:"M.776 21.93a5.92 5.92 0 0 1 5.1-6.646l71.236-9.345a5.932 5.932 0 0 1 6.652 5.104l12.173 92.196a5.92 5.92 0 0 1-5.1 6.646L19.6 119.229a5.931 5.931 0 0 1-6.651-5.104L.776 21.929Z",fill:"#F9FAFB"})),i||(i=z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M77.21 6.673 5.973 16.018a5.18 5.18 0 0 0-4.463 5.815l12.173 92.196a5.19 5.19 0 0 0 5.82 4.466l71.237-9.345a5.18 5.18 0 0 0 4.463-5.815L83.029 11.14a5.19 5.19 0 0 0-5.82-4.467Zm-71.334 8.61a5.92 5.92 0 0 0-5.1 6.646l12.173 92.196a5.931 5.931 0 0 0 6.651 5.104l71.237-9.344a5.92 5.92 0 0 0 5.1-6.646L83.764 11.043a5.932 5.932 0 0 0-6.651-5.104L5.876 15.284Z",fill:"#9CA3AF"})),a||(a=z.createElement("path",{d:"M22.223 5.926A5.926 5.926 0 0 1 28.149 0h58.775c.784 0 1.536.31 2.092.864l15.168 15.119a5.927 5.927 0 0 1 1.742 4.197v78.736a5.926 5.926 0 0 1-5.926 5.926H28.149a5.926 5.926 0 0 1-5.926-5.926V5.926Z",fill:"#fff"})),s||(s=z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M105.186 98.916V20.18c0-1.378-.549-2.7-1.525-3.672L88.493 1.389a2.222 2.222 0 0 0-1.569-.648H28.15a5.185 5.185 0 0 0-5.186 5.185v92.99a5.185 5.185 0 0 0 5.186 5.185H100a5.185 5.185 0 0 0 5.186-5.185ZM28.149 0a5.926 5.926 0 0 0-5.926 5.926v92.99a5.926 5.926 0 0 0 5.926 5.926H100a5.926 5.926 0 0 0 5.926-5.926V20.18a5.927 5.927 0 0 0-1.742-4.197L89.016.864A2.963 2.963 0 0 0 86.924 0H28.15Z",fill:"#9CA3AF"})),o||(o=z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.297 14.747V0h.74v14.747a5.556 5.556 0 0 0 5.556 5.556h13.334v.74H92.593a6.296 6.296 0 0 1-6.296-6.296Z",fill:"#9CA3AF"})),l||(l=z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M91.112 31.748H37.038v-.74h54.074v.74ZM91.112 43.561H37.038v-.74h54.074v.74ZM91.112 55.374H37.038v-.74h54.074v.74ZM91.112 67.188H37.038v-.741h54.074v.74ZM64.445 79H37.038v-.74h27.407V79Z",fill:"#6B7280"})))},T=r(83679),V=r.n(T);function W(e){var t;let{categories:r=[],category:n,isCategoryList:i=!1,layout:a="grid",newsroomName:s,showDate:o,showSubtitle:l,stories:u}=e,g=(0,h.useLocale)(),m=r.length>0,[v,p]=(0,f.useMemo)(()=>i?[[],u]:2!==u.length||m?[u.slice(0,1),u.slice(1)]:[u,[]],[m,i,u]),y=(t=p.length,(0,f.useCallback)(e=>i?"small":3===t||6===t?"medium":e<2||4===t?"big":e<5?"medium":"small",[i,t]));return v.length||p.length?(0,c.jsxs)(c.Fragment,{children:[v.length>0&&(0,c.jsx)("div",{className:V().highlightedStoriesContainer,children:v.map(e=>(0,c.jsx)(M,{story:e,showDate:o},e.uuid))}),m&&(0,c.jsx)(P,{activeCategory:n,categories:r,className:V().filtersContainer,locale:g}),p.length>0&&"grid"===a&&(0,c.jsx)("div",{className:V().storiesContainer,children:p.map((e,t)=>(0,c.jsx)(E,{story:e,size:y(t),showDate:o,showSubtitle:l},e.uuid))}),p.length>0&&"masonry"===a&&(0,c.jsx)(j,{className:V().staggered,children:p.map(e=>(0,c.jsx)(E,{className:V().card,story:e,size:"medium",showDate:o,showSubtitle:l,withStaticImage:!0},e.uuid))})]}):(0,c.jsxs)("div",{className:V().noStories,children:[(0,c.jsx)(I,{}),(0,c.jsx)("h1",{className:V().noStoriesTitle,children:(0,c.jsx)(h.FormattedMessage,{locale:g,for:d.Iz.yy.title,values:{newsroom:s}})}),(0,c.jsx)("p",{className:V().noStoriesSubtitle,children:(0,c.jsx)(h.FormattedMessage,{locale:g,for:d.Iz.yy.subtitle})})]})}var X=r(37412),B=r.n(X);function J(e){let{categories:t,category:r,excludedStoryUuids:n,initialStories:i,isCategoryList:a,layout:s,newsroomName:o,pageSize:l,showDate:m,showSubtitle:v,total:p}=e,y=(0,h.useLocale)(),{load:_,loading:j,data:b,done:x}=(0,u.q)((0,f.useCallback)(e=>h.http.get("/api/stories",{limit:l,offset:e,locale:y,category:null==r?void 0:r.id,query:n&&JSON.stringify({uuid:{$nin:n}})}),[r,n,y,l]),{data:i,total:p});return(0,c.jsxs)("div",{children:[(0,c.jsx)(W,{categories:t,category:r,isCategoryList:a,layout:s,newsroomName:o,showDate:m,showSubtitle:v,stories:b}),!x&&(0,c.jsx)(g.z,{variation:"secondary",onClick:_,loading:j,className:B().loadMore,children:j?(0,c.jsx)(h.FormattedMessage,{locale:y,for:d.Iz.ai.stateLoading}):(0,c.jsx)(h.FormattedMessage,{locale:y,for:d.Iz.Nw.loadMore})})]})}},12771:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});var n=r(2265);function i(e){void 0===e&&(e=!1);var t=(0,n.useRef)(e),r=(0,n.useCallback)(function(){return t.current},[]);return(0,n.useEffect)(function(){return t.current=!0,function(){t.current=!1}},[]),r}},67922:function(e,t,r){"use strict";r.d(t,{a:function(){return u}});var n=r(2265),i=r(47930),a=r(13719),s=r(58279),o=new Map,l=function(e,t){var r=o.get(e);if(!r){var n=matchMedia(e),i=new Set,a=function(){i.forEach(function(e){return e(n.matches)})};n.addEventListener?n.addEventListener("change",a,{passive:!0}):n.addListener(a),r={mql:n,dispatchers:i,listener:a},o.set(e,r)}r.dispatchers.add(t),t(r.mql.matches,!0)},c=function(e,t){var r=o.get(e);if(r){var n=r.mql,i=r.dispatchers,a=r.listener;i.delete(t),i.size||(o.delete(e),n.removeEventListener?n.removeEventListener("change",a):n.removeListener(a))}};function u(e,t){var r=(0,i.S)(),o=(0,a.D)(e),u=(0,n.useRef)(),d=(0,n.useCallback)(function(e,n){u.current!==e&&(u.current=e,(!n||t)&&r())},[t]);return!t&&s.jU&&o!==e&&l(e,d),(0,n.useEffect)(function(){return t&&l(e,d),function(){return c(e,d)}},[e]),u.current}},13719:function(e,t,r){"use strict";r.d(t,{D:function(){return i}});var n=r(2265);function i(e){var t=(0,n.useRef)();return(0,n.useEffect)(function(){t.current=e}),t.current}},47930:function(e,t,r){"use strict";r.d(t,{S:function(){return s}});var n=r(2265),i=r(70813),a=function(e){return(e+1)%Number.MAX_SAFE_INTEGER};function s(){var e=(0,i.F)(0)[1];return(0,n.useCallback)(function(){e(a)},[])}},70813:function(e,t,r){"use strict";r.d(t,{F:function(){return a}});var n=r(2265),i=r(12771);function a(e){var t=(0,n.useState)(e),r=t[0],a=t[1],s=(0,i.t)(!0);return[r,(0,n.useCallback)(function(e){s()&&a(e)},[])]}},58279:function(e,t,r){"use strict";r.d(t,{ZT:function(){return n},aP:function(){return o},jU:function(){return i},p2:function(){return a},wq:function(){return s}});var n=function(){},i="undefined"!=typeof window&&"undefined"!=typeof navigator&&"undefined"!=typeof document,a=function(e,t){return e===t},s=function(e){return e.every(Boolean)},o=function(e){return e.some(Boolean)}},16463:function(e,t,r){"use strict";r.r(t);var n=r(71169),i={};for(var a in n)"default"!==a&&(i[a]=(function(e){return n[e]}).bind(0,a));r.d(t,i)},47265:function(e){e.exports={container:"StaggeredLayout_container__zqY_d",desktop:"StaggeredLayout_desktop__XJTZG"}},87052:function(e){e.exports={container:"HighlightedStoryCard_container__pGQxY",image:"HighlightedStoryCard_image__5L9vv",titleLink:"HighlightedStoryCard_titleLink__e5UuW",subtitleLink:"HighlightedStoryCard_subtitleLink__ySM_2",imageWrapper:"HighlightedStoryCard_imageWrapper__Pp8JH",placeholder:"HighlightedStoryCard_placeholder__2nS_p",content:"HighlightedStoryCard_content__2ENHM",separator:"HighlightedStoryCard_separator__pZ_Rj",title:"HighlightedStoryCard_title__bPeVr",huge:"HighlightedStoryCard_huge__LgJTz",subtitle:"HighlightedStoryCard_subtitle__k75v0",limited:"HighlightedStoryCard_limited__3NPWY",hidden:"HighlightedStoryCard_hidden__cnvvA",date:"HighlightedStoryCard_date__suPyk"}},74109:function(e){e.exports={title:"CategoriesFilters_title__Q_nE9",filters:"CategoriesFilters_filters___qFTE",badge:"CategoriesFilters_badge__K5b9X",active:"CategoriesFilters_active__9ujj_"}},56800:function(e,t){var r;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=a(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=a(t,r));return t}(r)))}return e}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0!==(r=(function(){return i}).apply(t,[]))&&(e.exports=r)}()},73075:function(e,t,r){"use strict";r.d(t,{q:function(){return c}});var n=r(2265);function i(e,t,r,n,i,a,s){try{var o=e[a](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t){switch(t.type){case"LOAD":return s(s({},e),{},{loading:!0,error:void 0,tries:e.tries+1});case"LOADED":var{data:r,offset:n,total:i}=t;return s(s({},e),{},{loading:!1,data:[...e.data.slice(0,n),...r],total:i,tries:0});case"ERROR":return s(s({},e),{},{loading:!1,error:t.error});default:return e}}function l(){var{data:e,total:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{error:void 0,data:null!=e?e:[],loading:void 0===e,total:t,tries:0}}function c(e,t){var r,{retryOnError:a=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},[s,c]=(0,n.useReducer)(o,t&&Array.isArray(t)?{data:t}:t,l),{loading:u,tries:d,error:f,data:h,total:g}=s,m=h.length,v=(0,n.useCallback)((r=function*(){if(!u){c({type:"LOAD"});try{var t=yield e(m);c({type:"LOADED",offset:m,data:t.data,total:t.total})}catch(e){c({type:"ERROR",error:e instanceof Error?e:Error("Unknown error.")})}}},function(){var e=this,t=arguments;return new Promise(function(n,a){var s=r.apply(e,t);function o(e){i(s,n,a,o,l,"next",e)}function l(e){i(s,n,a,o,l,"throw",e)}o(void 0)})}),[u,m,e]);return(0,n.useEffect)(()=>{0===h.length&&(void 0===g||g>0)&&v()},[]),(0,n.useEffect)(()=>{f&&d<=a&&v()},[f,d,a,v]),{load:v,loading:u,error:f,data:h,count:h.length,total:g,done:void 0!==g&&h.length>=g}}}}]);
//# sourceMappingURL=7069-a23454bf968b651f.js.map